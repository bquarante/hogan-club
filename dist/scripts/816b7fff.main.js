!function(a,b){"use strict";var c=function(){return this},d=c;d.prototype.init=function(){function b(b,c){console.log("mask");var d=c.getContext("2d");d.drawImage(b,0,0,c.width,c.height);var e=c.toDataURL("image/jpg");a("svg image").attr("xlink:href",e),a("svg").css({visibility:"visible"}),a("#video").css({visibility:"hidden"})}a("#video").maximage("maxcover"),a("#thecanvas").attr("width",a("#video").width()),a("#thecanvas").attr("height",a("#video").height()),a("svg").attr("width",a("#video").width()),a("svg").attr("height",a("#video").height()),a("svg").css({"margin-left":a("#video").css("margin-left"),"margin-top":a("#video").css("margin-top")}),a("#svgPath rect").attr("height",a("svg").attr("height"));for(var c=6,d=a("svg").parent().width(),e=Math.round(d/c),f=a("svg").attr("height"),g=(Math.round(f/2),Math.round((a("svg").attr("width")-d)/2)),h="",i=f/3,j=document.getElementById("video"),k=document.getElementById("thecanvas"),l=1;c>=l;l++)h+='<rect id="rect'+l+'" class="rect" x="'+(e*(l-1)+g)+'" y="0" width="'+e+'" height="'+f+'"></rect>';a("#svgPath").html(h),j.addEventListener("pause",function(){b(video,k)},!1),j.addEventListener("play",function(){a("svg").css({visibility:"hidden"}),a("#video").css({visibility:"visible"})},!1);var m=new ScrollMagic,n=new ScrollScene({triggerElement:".trigger1",triggerHook:"onLeave",duration:i}).setPin(".intro").addTo(m);n.on("start",function(a){"FORWARD"===a.scrollDirection?video.pause():"REVERSE"===a.scrollDirection&&video.play()}),n.addIndicators({zindex:100});var o=(new TimelineMax).add([TweenMax.staggerTo(".rect",1,{attr:{height:i},ease:Linear.easeout},.1)]),p=new ScrollScene({triggerElement:".trigger2",triggerHook:"onLeave",offset:i,duration:i}).setTween(o).addTo(m);p.addIndicators({zindex:100})},a(b).on("load",function(){(new c).init()})}(jQuery,window);